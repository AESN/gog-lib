<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>index</title>
    <script src="d3.min.js"></script>
    <script src="class.js"></script>
</head>
<body>
<div align="center" id="legends">
<canvas id="can" height="400" width="650"></canvas>
    <br/>
    <span style="color:green">X: green</span> &nbsp;
    <span style="color:red">Y: red</span> &nbsp;
    <span style="color:purple">Z: purple</span> &nbsp;
    <span style="color:blue">M: blue</span>
</div>
</body>
<script>


    d3.text("test.csv", function(text) {
        var chart = new Lib();
        chart.data = d3.csv.parseRows(text);
        var header = chart.data[0];
        var X = chart.data[1][0];
        var Y = chart.data[2][0];
        var Z = chart.data[3][0];
        var M = chart.data[4][0];
        chart.varset.Header = header;
        chart.varset.X = chart.helpers.parseNumber(chart.data[1]);
        chart.varset.Y = chart.helpers.parseNumber(chart.data[2]);
        chart.varset.Z = chart.helpers.parseNumber(chart.data[3]);
        chart.varset.M = chart.helpers.parseNumber(chart.data[4]);
        chart.varset.M = chart.variables.pow(chart.varset.M,2,false);
        console.log(chart.varset.M)

        chart.config.margin = {top: 5, right: 5, bottom: 5, left: 5};
        chart.config.id = "can";
        chart.config.height = 400;
        chart.config.width = 650;
        chart.coordinates = {
            type: "cartisian",
            nice: false,
            gridColor: "rgba(128, 128, 255, 0.5)",
            gridOpacity: 0.5,
            orientation: {
                x: "bottom",
                y: "left"
            },
            title: {
                x: null,
                y: null,
                fontSize: "12 pt",
                fontType: "Helvetica",
                fontColor: "black"
            },
            format: "",
            ticks: 10,
            StepSize: 10,
            axesColor: {
                x: "black",
                y: "black"
            },
            x: chart.varset.Header
        };
        chart.renderCartasian(d3.min(chart.algebra.blend([chart.varset.X,chart.varset.Y,chart.varset.Z, chart.varset.M], false))-10,
                d3.max(chart.algebra.blend([chart.varset.X,chart.varset.Y,chart.varset.Z,chart.varset.M], false))+20,
                chart.config, chart.coordinates, chart.varset);

        chart.geom.line(chart.varset.X, 'green');
        chart.geom.line(chart.varset.Y, 'red');
        chart.geom.line(chart.varset.Z, 'purple');
        chart.geom.line(chart.varset.M, 'blue');


    });
</script>
</html>